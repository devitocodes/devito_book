project:
  type: book
  output-dir: _book

book:
  title: "Finite Difference Computing with PDEs"
  subtitle: "A Devito Approach"
  author:
    - name: Gerard J. Gorman
      affiliation: Imperial College London
  date: today
  chapters:
    - index.qmd
    - chapters/preface/index.qmd
    - part: "Main Chapters"
      chapters:
        - chapters/devito_intro/index.qmd
        - chapters/wave/index.qmd
        - chapters/diffu/index.qmd
        - chapters/advec/index.qmd
        - chapters/nonlin/index.qmd
        - chapters/elliptic/index.qmd
        - chapters/systems/index.qmd
        - chapters/highorder/index.qmd
        - chapters/adjoint/index.qmd
        - chapters/memory/index.qmd
        - chapters/distributed/index.qmd
        - chapters/performance/index.qmd
        - chapters/cfd/index.qmd
        - chapters/darcy/index.qmd
        - chapters/finance/index.qmd
    - part: "Appendices"
      chapters:
        - chapters/appendices/formulas/index.qmd
        - chapters/appendices/trunc/index.qmd
        - chapters/appendices/theory/index.qmd
        - chapters/appendices/softeng2/index.qmd
  repo-url: https://github.com/devitocodes/devito_book
  site-url: https://devitocodes.github.io/devito_book

bibliography: references.bib

format:
  html:
    theme: cosmo
    css: styles/draft.css
    code-fold: false
    toc: true
    number-sections: true
    number-depth: 3
    crossref:
      chapters: true
  pdf:
    documentclass: scrbook
    classoption:
      - oneside
      - open=any
    papersize: letter
    toc: true
    number-sections: true
    number-depth: 3
    colorlinks: true
    default-image-extension: png
    pdf-engine: pdflatex
    keep-tex: true
    geometry:
      - margin=1in
    include-in-header:
      text: |
        % Draft watermark
        \usepackage{draftwatermark}
        \SetWatermarkText{DRAFT}
        \SetWatermarkScale{1}
        \SetWatermarkColor[gray]{0.9}

        % Required packages
        \usepackage{bm}  % For bold math symbols

        % Custom LaTeX macros from the book
        \newcommand{\half}{\frac{1}{2}}
        \newcommand{\halfi}{{1/2}}
        \newcommand{\tp}{\thinspace .}

        \newcommand{\uex}{u_{\mbox{\footnotesize e}}}
        \newcommand{\uexd}[1]{u_{\mbox{\footnotesize e}, #1}}
        \newcommand{\vex}{v_{\mbox{\footnotesize e}}}
        \newcommand{\Vex}{V_{\mbox{\footnotesize e}}}
        \newcommand{\vexd}[1]{v_{\mbox{\footnotesize e}, #1}}
        \newcommand{\Aex}{A_{\mbox{\footnotesize e}}}
        \newcommand{\wex}{w_{\mbox{\footnotesize e}}}

        % Operators
        \newcommand{\Ddt}[1]{\frac{D #1}{dt}}
        \newcommand{\E}[1]{\hbox{E}\lbrack #1 \rbrack}
        \newcommand{\Var}[1]{\hbox{Var}\lbrack #1 \rbrack}
        \newcommand{\Std}[1]{\hbox{Std}\lbrack #1 \rbrack}

        \newcommand{\xpoint}{\bm{x}}
        \newcommand{\normalvec}{\bm{n}}
        \newcommand{\Oof}[1]{\mathcal{O}(#1)}

        % Boldface vectors/tensors
        \newcommand{\x}{\bm{x}}
        \newcommand{\X}{\bm{X}}
        \newcommand{\uu}{\bm{u}}
        \newcommand{\vv}{\bm{v}}
        \newcommand{\w}{\bm{w}}
        \newcommand{\acc}{\bm{a}}
        \newcommand{\rpos}{\bm{r}}
        \newcommand{\V}{\bm{V}}
        \newcommand{\e}{\bm{e}}
        \newcommand{\f}{\bm{f}}
        \newcommand{\F}{\bm{F}}
        \newcommand{\stress}{\bm{\sigma}}
        \newcommand{\strain}{\bm{\varepsilon}}
        \newcommand{\stressc}{{\sigma}}
        \newcommand{\strainc}{{\varepsilon}}
        \newcommand{\I}{\bm{I}}
        \newcommand{\T}{\bm{T}}
        \newcommand{\U}{\bm{U}}
        \newcommand{\q}{\bm{q}}
        \newcommand{\g}{\bm{g}}

        \newcommand{\dfc}{\alpha}
        % Unit vectors
        \newcommand{\ii}{\bm{i}}
        \newcommand{\jj}{\bm{j}}
        \newcommand{\kk}{\bm{k}}
        \newcommand{\ir}{\bm{i}_r}
        \newcommand{\ith}{\bm{i}_{\theta}}
        \newcommand{\iz}{\bm{i}_z}

        % Index sets
        \newcommand{\Ix}{\mathcal{I}_x}
        \newcommand{\Iy}{\mathcal{I}_y}
        \newcommand{\Iz}{\mathcal{I}_z}
        \newcommand{\It}{\mathcal{I}_t}
        \newcommand{\If}{\mathcal{I}_s}
        \newcommand{\Ifd}{{I_d}}
        \newcommand{\Ifb}{{I_b}}
        \newcommand{\setb}[1]{#1^0}
        \newcommand{\sete}[1]{#1^{-1}}
        \newcommand{\setl}[1]{#1^-}
        \newcommand{\setr}[1]{#1^+}
        \newcommand{\seti}[1]{#1^i}
        \newcommand{\sequencei}[1]{\left\{ {#1}_i \right\}_{i\in\If}}
        \newcommand{\sequencej}[1]{\left\{ {#1}_j \right\}_{j\in\If}}

        % Superscripts for intermediate solutions
        \newcommand{\stepzero}{*}
        \newcommand{\stephalf}{***}
        \newcommand{\stepone}{**}

        % Finite elements
        \newcommand{\basphi}{\varphi}
        \newcommand{\baspsi}{\psi}
        \newcommand{\refphi}{\tilde\basphi}
        \newcommand{\psib}{\bm{\psi}}
        \newcommand{\sinL}[1]{\sin\left((#1+1)\pi\frac{x}{L}\right)}
        \newcommand{\xno}[1]{x_{#1}}
        \newcommand{\Xno}[1]{X_{(#1)}}
        \newcommand{\yno}[1]{y_{#1}}
        \newcommand{\Yno}[1]{Y_{(#1)}}
        \newcommand{\xdno}[1]{\bm{x}_{#1}}

        % FEniCS commands
        \newcommand{\dX}{\, \mathrm{d}X}
        \newcommand{\dx}{\, \mathrm{d}x}
        \newcommand{\ds}{\, \mathrm{d}s}
        \newcommand{\Real}{\mathbb{R}}
        \newcommand{\Integerp}{\mathbb{N}}
        \newcommand{\Integer}{\mathbb{Z}}

# Quarto variables
# These can be referenced as {{< var name >}} in documents
src: "https://github.com/devitocodes/devito_book/tree/devito/src"
src_vib: "https://github.com/devitocodes/devito_book/tree/devito/src/vib"
src_wave: "https://github.com/devitocodes/devito_book/tree/devito/src/wave"
src_diffu: "https://github.com/devitocodes/devito_book/tree/devito/src/diffu"
src_nonlin: "https://github.com/devitocodes/devito_book/tree/devito/src/nonlin"
src_trunc: "https://github.com/devitocodes/devito_book/tree/devito/src/trunc"
src_advec: "https://github.com/devitocodes/devito_book/tree/devito/src/advec"
src_elliptic: "https://github.com/devitocodes/devito_book/tree/devito/src/elliptic"
src_systems: "https://github.com/devitocodes/devito_book/tree/devito/src/systems"
src_highorder: "https://github.com/devitocodes/devito_book/tree/devito/src/highorder"
src_adjoint: "https://github.com/devitocodes/devito_book/tree/devito/src/adjoint"
src_memory: "https://github.com/devitocodes/devito_book/tree/devito/src/memory"
src_distributed: "https://github.com/devitocodes/devito_book/tree/devito/src/distributed"
src_performance: "https://github.com/devitocodes/devito_book/tree/devito/src/performance"
src_cfd: "https://github.com/devitocodes/devito_book/tree/devito/src/cfd"
src_darcy: "https://github.com/devitocodes/devito_book/tree/devito/src/darcy"
src_formulas: "https://github.com/devitocodes/devito_book/tree/devito/src/formulas"
src_softeng2: "https://github.com/devitocodes/devito_book/tree/devito/src/softeng2"
src_finance: "https://github.com/devitocodes/devito_book/tree/devito/src/finance"
src_theory: "https://github.com/devitocodes/devito_book/tree/devito/src/theory"

crossref:
  eq-prefix: ""
  fig-prefix: "Figure"
  tbl-prefix: "Table"
  sec-prefix: "Section"
  chapters: true
